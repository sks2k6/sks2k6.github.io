<!DOCTYPE html>
<html>
<head>
  <title>Visitor Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body { margin:0;font-family:Arial;background:#0f172a;color:#e2e8f0 }
    .login { min-height:100vh;display:flex;align-items:center;justify-content:center }
    .box { background:#020617;padding:30px;border-radius:15px;width:300px;text-align:center }
    input,button { width:100%;padding:10px;margin:8px 0;border-radius:8px;border:none }
    input { background:#1e293b;color:white }
    button { background:#38bdf8;font-weight:bold;cursor:pointer }
    .error { color:red;font-size:13px }

    #dashboard { display:none }
    header { padding:15px;background:#020617;font-size:20px }
    .container { padding:20px;overflow-x:auto }
    table { width:100%;border-collapse:collapse;background:#020617 }
    th,td { padding:10px;border-bottom:1px solid #1e293b;font-size:13px;white-space:nowrap }
    th { color:#38bdf8 }
    tr:hover { background:#1e293b }
  </style>
</head>

<body>

<div class="login" id="loginBox">
  <div class="box">
    <h2>Admin Login</h2>
    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <div class="error" id="err"></div>
  </div>
</div>

<div id="dashboard">
  <header>ðŸ“Š Visitor Dashboard</header>
  <div class="container">
    <table>
      <thead>
        <tr>
          <th>IP</th>
          <th>Page</th>
          <th>Screen</th>
          <th>Viewport</th>
          <th>RAM</th>
          <th>Cores</th>
          <th>Network</th>
          <th>Language</th>
          <th>Timezone</th>
          <th>Time</th>
        </tr>
      </thead>
      <tbody id="data"></tbody>
    </table>
  </div>
</div>

<script>
const USER = "sksbot";
const PASS = "syamsyam";

function login() {
  if (user.value === USER && pass.value === PASS) {
    localStorage.setItem("admin", "true");
    show();
  } else {
    err.innerText = "Wrong login";
  }
}

function show() {
  loginBox.style.display = "none";
  dashboard.style.display = "block";
  load();
}

if (localStorage.getItem("admin") === "true") show();

async function load() {
  const r = await fetch("/api/getVisitors");
  const data = await r.json();
  const tbody = document.getElementById("data");
  tbody.innerHTML = "";

  data.forEach(v => {
    tbody.innerHTML += `
      <tr>
        <td>${v.ip || "-"}</td>
        <td>${v.page || "-"}</td>
        <td>${v.screen || "-"}</td>
        <td>${v.viewport || "-"}</td>
        <td>${v.memory_gb || "-"}</td>
        <td>${v.cpu_cores || "-"}</td>
        <td>${v.connection || "-"}</td>
        <td>${v.language || "-"}</td>
        <td>${v.timezone || "-"}</td>
        <td>${new Date(v.created_at).toLocaleString()}</td>
      </tr>`;
  });
}
</script>

</body>
</html>
